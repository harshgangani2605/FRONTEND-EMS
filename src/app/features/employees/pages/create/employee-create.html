<ng-container *hasPermission="'employee.create'">
  <div class="form-container">

    <h2>Create Employee</h2>

    <form #form="ngForm" (ngSubmit)="save(form)">

      <!-- Full Name -->
      <div class="form-group">
        <label>Full Name</label>
        <input type="text"
               class="form-input"
               name="fullName"
               [(ngModel)]="employee.fullName"
               minlength="3"
               #fullName="ngModel"
               required />

        <!-- LIVE ERROR (NAME) -->
        <span class="error" *ngIf="fullName.invalid && fullName.touched">
          <span *ngIf="fullName.errors?.['required']">Full Name is required</span>
          <span *ngIf="fullName.errors?.['minlength']">Minimum 3 characters required</span>
        </span>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label>Email</label>
        <input type="email"
               class="form-input"
               name="email"
               [(ngModel)]="employee.email"
               #email="ngModel"
               required />

        <!-- LIVE ERROR (EMAIL) -->
        <span class="error" *ngIf="email.invalid && email.touched">
          <span *ngIf="email.errors?.['required']">Email is required</span>
          <span *ngIf="email.errors?.['email']">Enter a valid email address</span>
        </span>
      </div>

      <!-- Salary -->
      <div class="form-group">
        <label>Salary</label>
        <input type="number"
               class="form-input"
               name="salary"
               [(ngModel)]="employee.salary"
               min="0"
               #salary="ngModel"
               required />

        <!-- LIVE ERROR (SALARY) -->
        <span class="error" *ngIf="salary.invalid && salary.touched">
          <span *ngIf="salary.errors?.['required']">Salary is required</span>
          <span *ngIf="salary.errors?.['min']">Salary cannot be negative</span>
        </span>
      </div>

      <!-- Date Joined -->
      <div class="form-group">
        <label>Joined On</label>
        <input type="date"
               class="form-input"
               name="joinedOn"
               [(ngModel)]="employee.joinedOn"
               [max]="today"
               #joinedOn="ngModel"
               required />

        <!-- LIVE ERROR (DATE) -->
        <span class="error" *ngIf="joinedOn.invalid && joinedOn.touched">
          <span *ngIf="joinedOn.errors?.['required']">Joining date is required</span>
          <span *ngIf="joinedOn.errors?.['max']">Date cannot be in the future</span>
        </span>
      </div>

      <!-- Department -->
      <div class="form-group">
        <label>Department</label>
        <select name="departmentId"
                [(ngModel)]="employee.departmentId"
                #departmentId="ngModel"
                required>
          <option value="">Select Department</option>
          <option *ngFor="let dept of departments" [value]="dept.id">
            {{ dept.name }}
          </option>
        </select>

        <!-- LIVE ERROR (DEPARTMENT) -->
        <span class="error" *ngIf="departmentId.invalid && departmentId.touched">
          <span *ngIf="departmentId.errors?.['required']">Department is required</span>
        </span>
      </div>

      <!-- Skills -->
      <div class="form-group">
        <label>Skills</label>
        <div class="skills-box">
          <div class="skill-item" *ngFor="let skill of skills">
            <input type="checkbox"
                   [value]="skill.id"
                   (change)="toggleSkill(skill.id, $event)"
                   [checked]="employee.skillIds.includes(skill.id)" />
            <span>{{ skill.name }}</span>
          </div>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="save-btn">Save Employee</button>

    </form>

  </div>
</ng-container>
